{% extends 'base.html' %} {% block body %}
<div class="d-flex">
  <aside id="sidebar" class="expand">
    <div class="d-flex">
      <button class="toggle-btn" type="button">
        <i class="fa-solid fa-bars"></i>
      </button>
      <div class="sidebar-logo">
        <a href="/"> ZyCurrency </a>
      </div>
    </div>
    <ul class="sidebar-nav">
      <li class="sidebar-item">
        <a href="/" class="sidebar-link">
          <i class="fas fa-house"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li class="sidebar-item">
        <a href="/currency/convert" class="sidebar-link">
          <i class="fas fa-arrow-right-arrow-left"></i>
          <span>Converter</span>
        </a>
      </li>
      <li class="sidebar-item">
        <a href="/currency/historical-exrate" class="sidebar-link">
          <i class="fas fa-chart-line"></i>
          <span>Exchange Rate Changes</span>
        </a>
      </li>
      <li class="sidebar-item">
        <a href="/currency/historical-rsi" class="sidebar-link">
          <i class="fas fa-chart-line"></i>
          <span>RSI Value Changes</span>
        </a>
      </li>
      <li class="sidebar-item">
        <a href="/currency/comparison" class="sidebar-link">
          <i class="fas fa-chart-column"></i>
          <span>Currency Comparison</span>
        </a>
      </li>
      <li class="sidebar-item">
        <a href="/currency/correlation-analysis" class="sidebar-link">
          <i class="fas fa-magnifying-glass-chart"></i>
          <span class="text-wrap wrap">Currency Correlation Analysis</span>
        </a>
      </li>
    </ul>

    <div class="sidebar-footer">
      <a href="/notifications/view" class="sidebar-link text-light">
        <i class="fa-solid fa-gear"></i>
        <span class="text-wrap wrap">Notification Setting</span>
      </a>

      <a href="/auth/logout" class="sidebar-link text-light">
        <i class="fas fa-right-from-bracket"></i>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <div class="main bg-white"  >
    <div class="col" >
      <div>
        <div class="d-flex align-items-center justify-content-end p-3">
          <i class="fa-solid fa-bell fa-xl"  style="color: #000; margin-right: 60px;" ></i>

          <div id ='user-profile' data-toggle="modal" data-target="#profile-modal" >
            {% if current_user.picture_url %}
                {% if current_user.picture_url.startswith('user_pics') %}
                <img src="{{ url_for('static', filename=current_user.picture_url) }} " alt="{{ current_user.first_name }} {{ current_user.last_name }}" class="border rounded-circle" style="width: 30px; height: 30px; margin-right:10px">
                {% else %}
                <img src="{{ current_user.picture_url }}" alt="{{ current_user.first_name }} {{ current_user.last_name }}" class="border rounded-circle" style="width: 30px; height:30px;margin-right:10px">
                {% endif %}
            {% else %}
            <i class="fa-solid fa-user align-self-center border rounded-circle mx-10" style="margin-right:10px; padding: 7px; color: #fffafa; background-color: #787878"></i>
            {% endif %}

            {{current_user.first_name}} 
            {% if current_user.last_name %}
            {{current_user.last_name}} 
            {% endif %}
          </div>
        </div>

        <div class="modal fade" id="profile-modal" tabindex="-1" role="dialog" aria-labelledby="profile-modal" aria-hidden="true" data-backdrop="false">
          <div class="modal-dialog model-sm" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <div class='col text-center'>
                  {% if current_user.picture_url %}
                      {% if current_user.picture_url.startswith('user_pics') %}
                      <img src="{{ url_for('static', filename=current_user.picture_url) }} " alt="{{ current_user.first_name }} {{ current_user.last_name }}" class="border rounded-circle" style="width: 70px; height: 70px">
                      {% else %}
                      <img src="{{ current_user.picture_url }}" alt="{{ current_user.first_name }} {{ current_user.last_name }}" class="border rounded-circle" style="width: 70px; height: 70px">
                      {% endif %}
                  {% else %}
                  <i class="fa-solid fa-user fa-2xl align-self-center border rounded-circle mx-10" style="padding-top: 30px; width: 70px; height: 70px; color: #fffafa; background-color: #787878"></i>
                  {% endif %}
                    <br>
                    <div style="padding-top:10px">
                    <span class='fw-bold' > {{ current_user.first_name }} {% if current_user.last_name %} {{ current_user.last_name }} {% endif %}</span><br>
                    <span> {{ current_user.email}} </span>
                    </div>
                </div>
              </div>
              <div class="modal-body">
                <div class="d-flex flex-column justify-content-center align-items-start">
                <a href="/auth/edit-profile" class='profile-link'>
                  <i class="fa-solid fa-pencil"></i>
                  <span >Edit Profile</span>
                </a>

                <a href="/auth/change-password" class='profile-link'>
                  <i class="fa-solid fa-wrench"></i>
                  {% if current_user.password %}
                  <span>Change Password</span>
                  {% else %}
                  <span>Add Password</span>
                  {% endif %}
                </a>
              </div>
              </div>

              <div class="modal-footer d-flex justify-content-center">
                <button type="button" class="btn btn-sm btn-dark" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div>{% block content %} {% endblock %}</div>
    </div>
  </div>
</div>

<script>
  const hamBurger = document.querySelector(".toggle-btn");

  hamBurger.addEventListener("click", function () {
    document.querySelector("#sidebar").classList.toggle("expand");
  });
</script>

{% endblock %}
